# 2336. Smallest Number in Infinite Set

## **â“ Problem:**

ğŸ”— LeetCode 2336 - Smallest Number in Infinite Set

***

## **ğŸ“ MÃ´ táº£:**

HÃ£y thiáº¿t káº¿ má»™t **lá»›p (`class`)** cÃ³ tÃªn `SmallestInfiniteSet` Ä‘á»ƒ quáº£n lÃ½ má»™t táº­p há»£p vÃ´ háº¡n chá»©a táº¥t cáº£ cÃ¡c sá»‘ nguyÃªn dÆ°Æ¡ng báº¯t Ä‘áº§u tá»« `1`.

Lá»›p nÃ y há»— trá»£ cÃ¡c thao tÃ¡c sau:

1. **`int popSmallest()`**
   * Tráº£ vá» sá»‘ nhá» nháº¥t trong táº­p há»£p vÃ  xÃ³a nÃ³ khá»i táº­p.
2. **`void addBack(int num)`**
   * ThÃªm láº¡i sá»‘ `num` vÃ o táº­p há»£p náº¿u nÃ³ chÆ°a tá»“n táº¡i.

***

## **ğŸ’¡ VÃ­ dá»¥:**

#### âœ… **VÃ­ dá»¥ 1:**

**Input:**

```cpp
SmallestInfiniteSet s;
s.popSmallest();  // Tráº£ vá» 1
s.popSmallest();  // Tráº£ vá» 2
s.addBack(1);     // ThÃªm láº¡i sá»‘ 1
s.popSmallest();  // Tráº£ vá» 1
s.popSmallest();  // Tráº£ vá» 3
```

**Output:**

```
1
2
1
3
```

***

## **ğŸš€ Giáº£i phÃ¡p:**&#x20;

### **ğŸ”—DÃ¹ng Min-Heap vÃ  Biáº¿n Äáº¿m (`O(log n)`)**

ğŸ’¡ **Ã tÆ°á»Ÿng:**

* DÃ¹ng **min-heap** Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c sá»‘ Ä‘Ã£ bá»‹ `addBack` (tá»©c lÃ  Ä‘Ã£ bá»‹ pop trÆ°á»›c Ä‘Ã³).
* DÃ¹ng má»™t biáº¿n `nextNumber` Ä‘á»ƒ theo dÃµi sá»‘ tiáº¿p theo chÆ°a tá»«ng bá»‹ láº¥y ra.
* Khi `popSmallest()`:
  * Náº¿u heap khÃ´ng rá»—ng, láº¥y pháº§n tá»­ nhá» nháº¥t tá»« heap.
  * Náº¿u heap rá»—ng, tráº£ vá» `nextNumber` vÃ  tÄƒng giÃ¡ trá»‹ cá»§a nÃ³.
* Khi `addBack(num)`:
  * Náº¿u `num` chÆ°a cÃ³ trong heap vÃ  nhá» hÆ¡n `nextNumber`, thÃªm nÃ³ vÃ o heap.

***

### **ğŸ“œ Code C++ - Min-Heap + Biáº¿n Äáº¿m**

{% tabs %}
{% tab title="C++" %}
```cpp
#include <queue>
#include <unordered_set>

class SmallestInfiniteSet {
private:
    std::priority_queue<int, std::vector<int>, std::greater<int>> minHeap;
    std::unordered_set<int> addedBack;
    int nextNumber;

public:
    SmallestInfiniteSet() {
        nextNumber = 1;
    }

    int popSmallest() {
        if (!minHeap.empty()) {
            int smallest = minHeap.top();
            minHeap.pop();
            addedBack.erase(smallest);
            return smallest;
        }
        return nextNumber++;
    }

    void addBack(int num) {
        if (num < nextNumber && addedBack.find(num) == addedBack.end()) {
            minHeap.push(num);
            addedBack.insert(num);
        }
    }
};
```
{% endtab %}

{% tab title="Java" %}
```java
import java.util.PriorityQueue;
import java.util.HashSet;

class SmallestInfiniteSet {
    private PriorityQueue<Integer> minHeap;
    private HashSet<Integer> addedBack;
    private int nextNumber;

    public SmallestInfiniteSet() {
        minHeap = new PriorityQueue<>();
        addedBack = new HashSet<>();
        nextNumber = 1;
    }

    public int popSmallest() {
        if (!minHeap.isEmpty()) {
            int smallest = minHeap.poll();
            addedBack.remove(smallest);
            return smallest;
        }
        return nextNumber++;
    }

    public void addBack(int num) {
        if (num < nextNumber && addedBack.add(num)) {
            minHeap.add(num);
        }
    }
}
```
{% endtab %}

{% tab title="Python" %}
```python
import heapq

class SmallestInfiniteSet:
    def __init__(self):
        self.min_heap = []
        self.added_back = set()
        self.next_number = 1

    def popSmallest(self) -> int:
        if self.min_heap:
            smallest = heapq.heappop(self.min_heap)
            self.added_back.remove(smallest)
            return smallest
        else:
            self.next_number += 1
            return self.next_number - 1

    def addBack(self, num: int) -> None:
        if num < self.next_number and num not in self.added_back:
            heapq.heappush(self.min_heap, num)
            self.added_back.add(num)
```
{% endtab %}
{% endtabs %}

***

## **ğŸ¯ Äiá»ƒm chÃ­nh**

âœ” **DÃ¹ng Min-Heap** Ä‘á»ƒ lÆ°u trá»¯ sá»‘ Ä‘Ã£ bá»‹ pop vÃ  Ä‘Æ°á»£c add láº¡i.\
âœ” **DÃ¹ng biáº¿n `nextNumber`** Ä‘á»ƒ theo dÃµi sá»‘ nhá» nháº¥t tiáº¿p theo chÆ°a tá»«ng bá»‹ pop.\
âœ” **Set (unordered\_set/HashSet)** giÃºp kiá»ƒm tra xem sá»‘ Ä‘Ã£ Ä‘Æ°á»£c addBack chÆ°a.

***

## **â³ Äá»™ phá»©c táº¡p thuáº­t toÃ¡n**

| PhÆ°Æ¡ng phÃ¡p             | `popSmallest()` | `addBack()` | KhÃ´ng gian |
| ----------------------- | --------------- | ----------- | ---------- |
| **Min-Heap + Biáº¿n Äáº¿m** | `O(log n)`      | `O(log n)`  | `O(n)`     |

ğŸš€ **Heap giÃºp quáº£n lÃ½ hiá»‡u quáº£ cÃ¡c sá»‘ bá»‹ xÃ³a vÃ  thÃªm láº¡i, Ä‘áº£m báº£o Ä‘á»™ phá»©c táº¡p tá»‘i Æ°u.**

***

## **ğŸ“Œ Tá»•ng káº¿t**

* âœ… **DÃ¹ng Min-Heap Ä‘á»ƒ theo dÃµi sá»‘ nhá» nháº¥t khi `addBack()`.**
* âœ… **DÃ¹ng biáº¿n `nextNumber` Ä‘á»ƒ theo dÃµi sá»‘ káº¿ tiáº¿p chÆ°a pop.**
* âœ… **Set giÃºp trÃ¡nh trÃ¹ng láº·p khi thÃªm sá»‘ vÃ o heap.**
* âœ… **Hiá»‡u suáº¥t tá»‘t vá»›i `O(log n)` cho cáº£ `popSmallest()` vÃ  `addBack()`.**
