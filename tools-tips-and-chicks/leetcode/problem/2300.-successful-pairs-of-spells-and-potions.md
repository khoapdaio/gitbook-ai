# 2300. Successful Pairs of Spells and Potions

## **â“ Problem:**

ğŸ”— LeetCode 2300 - Successful Pairs of Spells and Potions

***

## **ğŸ“ MÃ´ táº£:**

Báº¡n cÃ³ **m** loáº¡i phÃ©p thuáº­t (`spells[i]`) vÃ  **n** loáº¡i thuá»‘c (`potions[j]`). Má»—i cáº·p `(spell, potion)` sáº½ táº¡o ra má»™t sá»©c máº¡nh báº±ng:

sá»©c máº¡nh=spellÃ—potion\text{sá»©c máº¡nh} = \text{spell} \times \text{potion}sá»©c máº¡nh=spellÃ—potion

Má»™t cáº·p Ä‘Æ°á»£c xem lÃ  **thÃ nh cÃ´ng** náº¿u **sá»©c máº¡nh** Ä‘áº¡t Ã­t nháº¥t **`success`**.

YÃªu cáº§u: Vá»›i má»—i phÃ©p thuáº­t `spells[i]`, tráº£ vá» sá»‘ lÆ°á»£ng thuá»‘c `potions[j]` cÃ³ thá»ƒ táº¡o ra **cáº·p thÃ nh cÃ´ng** vá»›i nÃ³.

***

## **ğŸ’¡ VÃ­ dá»¥:**

#### âœ… **VÃ­ dá»¥ 1:**

**Input:**

```cpp
spells = [10, 20, 30], potions = [1, 2, 3, 4], success = 30
```

**Output:**

```cpp
[3, 2, 1]
```

**Giáº£i thÃ­ch:**

* `spells[0] = 10`: CÃ¡c thuá»‘c `[3, 4]` thá»a mÃ£n (`10 * 3 = 30, 10 * 4 = 40`), cÃ³ `3` thuá»‘c há»£p lá»‡.
* `spells[1] = 20`: CÃ¡c thuá»‘c `[2, 3, 4]` thá»a mÃ£n (`20 * 2 = 40, 20 * 3 = 60`), cÃ³ `2` thuá»‘c há»£p lá»‡.
* `spells[2] = 30`: Chá»‰ cÃ³ thuá»‘c `[1]` há»£p lá»‡ (`30 * 1 = 30`), cÃ³ `1` thuá»‘c há»£p lá»‡.

***

## **ğŸš€ Giáº£i phÃ¡p**

#### ğŸ”¹ **TÆ° duy:**

1. **Sáº¯p xáº¿p `potions`** Ä‘á»ƒ dá»… dÃ ng tÃ¬m kiáº¿m nhanh hÆ¡n.
2. **Duyá»‡t tá»«ng `spell`**, tÃ¬m trong `potions` sá»‘ thuá»‘c **nhá» nháº¥t** sao cho `spell * potion >= success`.
3. **DÃ¹ng Binary Search** (`O(log n)`) trÃªn `potions` Ä‘á»ƒ tá»‘i Æ°u.

***

## **ğŸ“œ Code - Binary Search**

{% tabs %}
{% tab title="C++" %}
```cpp
class Solution {
public:
    vector<int> successfulPairs(vector<int>& spells, vector<int>& potions, long long success) {
        sort(potions.begin(), potions.end());
        vector<int> res;
        for (int spell : spells) {
            long long target = (success + spell - 1) / spell; // ceil(success / spell)
            int index = lower_bound(potions.begin(), potions.end(), target) - potions.begin();
            res.push_back(potions.size() - index);
        }
        return res;
    }
};
```
{% endtab %}

{% tab title="Java" %}
```java
import java.util.*;

class Solution {
    public int[] successfulPairs(int[] spells, int[] potions, long success) {
        Arrays.sort(potions);
        int[] res = new int[spells.length];
        for (int i = 0; i < spells.length; i++) {
            long target = (success + spells[i] - 1) / spells[i]; // ceil(success / spell)
            int index = Arrays.binarySearch(potions, (int)target);
            if (index < 0) index = -(index + 1);  // Convert to insert position
            res[i] = potions.length - index;
        }
        return res;
    }
}
```
{% endtab %}

{% tab title="Python" %}
```python
from bisect import bisect_left

class Solution:
    def successfulPairs(self, spells: List[int], potions: List[int], success: int) -> List[int]:
        potions.sort()
        res = []
        for spell in spells:
            target = (success + spell - 1) // spell  # Equivalent to ceil(success / spell)
            index = bisect_left(potions, target)
            res.append(len(potions) - index)
        return res
```
{% endtab %}
{% endtabs %}

***

## **ğŸ¯ Äiá»ƒm chÃ­nh**

âœ” **Sáº¯p xáº¿p `potions` Ä‘á»ƒ tá»‘i Æ°u tÃ¬m kiáº¿m**.\
âœ” **DÃ¹ng Binary Search (`O(log n)`) Ä‘á»ƒ tÃ¬m `potion` nhá» nháº¥t thá»a mÃ£n Ä‘iá»u kiá»‡n**.\
âœ” **TÃ­nh toÃ¡n `target = ceil(success / spell)` Ä‘á»ƒ tÃ¬m ngÆ°á»¡ng phÃ¹ há»£p**.

***

## **â³ Äá»™ phá»©c táº¡p thuáº­t toÃ¡n**

| PhÆ°Æ¡ng phÃ¡p                            | Äá»™ phá»©c táº¡p            |
| -------------------------------------- | ---------------------- |
| **Sáº¯p xáº¿p `potions`**                  | `O(n log n)`           |
| **Duyá»‡t tá»«ng `spell` & Binary Search** | `O(m log n)`           |
| **Tá»•ng cá»™ng**                          | `O(n log n + m log n)` |

ğŸ“Œ **Nhanh hÆ¡n ráº¥t nhiá»u so vá»›i `O(m * n)`.** ğŸš€

***

## **ğŸ“Œ Tá»•ng káº¿t**

* âœ… **Sá»­ dá»¥ng Binary Search Ä‘á»ƒ tÃ¬m nhanh cÃ¡c `potions` phÃ¹ há»£p**.
* âœ… **Giáº£m thá»i gian cháº¡y tá»« `O(m * n)` xuá»‘ng `O(m log n)`**.
* âœ… **Xá»­ lÃ½ trÆ°á»ng há»£p `success` lá»›n vá»›i `long long` (C++/Java) Ä‘á»ƒ trÃ¡nh trÃ n sá»‘**.
