# 2542. Maximum Subsequence Score

## **â“ Problem:**

ğŸ”— [LeetCode 2542 - Maximum Subsequence Score](https://leetcode.com/problems/maximum-subsequence-score)

***

## **ğŸ“ MÃ´ táº£:**

Báº¡n Ä‘Æ°á»£c cho hai máº£ng sá»‘ nguyÃªn `nums1` vÃ  `nums2` cÃ³ cÃ¹ng Ä‘á»™ dÃ i `n`, cÃ¹ng vá»›i má»™t sá»‘ nguyÃªn `k`.

Báº¡n cáº§n chá»n má»™t **dÃ£y con** cÃ³ **Ä‘á»™ dÃ i Ä‘Ãºng `k`** tá»« `nums1`. Äiá»ƒm sá»‘ cá»§a dÃ£y con nÃ y Ä‘Æ°á»£c tÃ­nh theo cÃ´ng thá»©c:

$$
\text{score} = \text{sum}(\text{subsequence of nums1}) \times \min(\text{corresponding elements in nums2})
$$

Tá»©c lÃ  tá»•ng cá»§a cÃ¡c pháº§n tá»­ Ä‘Ã£ chá»n trong `nums1` nhÃ¢n vá»›i **giÃ¡ trá»‹ nhá» nháº¥t** cá»§a cÃ¡c pháº§n tá»­ tÆ°Æ¡ng á»©ng trong `nums2`.

HÃ£y **tráº£ vá» Ä‘iá»ƒm sá»‘ lá»›n nháº¥t cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c**.

***

## **ğŸ’¡ VÃ­ dá»¥:**

#### âœ… **VÃ­ dá»¥ 1:**

**Input:**

```cpp
nums1 = [1,3,3,2]
nums2 = [2,1,3,4]
k = 3
```

**Output:**

```
12
```

**Giáº£i thÃ­ch:**

* Chá»n cÃ¡c pháº§n tá»­ `(3,3,2)` tá»« `nums1`.
* CÃ¡c pháº§n tá»­ tÆ°Æ¡ng á»©ng trong `nums2` lÃ  `(1,3,4)`.
* Äiá»ƒm sá»‘: **(3 + 3 + 2) \* min(1,3,4) = 8 \* 1 = 8**.

Tuy nhiÃªn, náº¿u chá»n `(3,3,1)` tá»« `nums1`, cÃ¡c pháº§n tá»­ tÆ°Æ¡ng á»©ng trong `nums2` lÃ  `(3,3,2)`, Ä‘iá»ƒm sá»‘ sáº½ lÃ  **(3+3+1) \* min(3,3,2) = 7 \* 2 = 12**.

***

#### âœ… **VÃ­ dá»¥ 2:**

**Input:**

```cpp
nums1 = [4,2,3,1,5]
nums2 = [7,5,10,9,2]
k = 2
```

**Output:**

```
50
```

**Giáº£i thÃ­ch:**

* Chá»n `(5,3)` tá»« `nums1`.
* CÃ¡c pháº§n tá»­ tÆ°Æ¡ng á»©ng trong `nums2` lÃ  `(2,10)`.
* Äiá»ƒm sá»‘: **(5+3) \* min(2,10) = 8 \* 2 = 16**.

NhÆ°ng náº¿u chá»n `(4,5)`, cÃ¡c pháº§n tá»­ trong `nums2` lÃ  `(7,2)`, Ä‘iá»ƒm sá»‘ lÃ  **(4+5) \* min(7,2) = 9 \* 2 = 18**.

Lá»±a chá»n tá»‘i Æ°u lÃ  `(3,5)`, cÃ¡c pháº§n tá»­ tÆ°Æ¡ng á»©ng lÃ  `(10,2)`, Ä‘iá»ƒm sá»‘ lÃ  **(3+5) \* min(10,2) = 8 \* 10 = 50**.

***

## **ğŸš€ Giáº£i phÃ¡p**

ğŸ’¡ **Ã tÆ°á»Ÿng:**

* Thay vÃ¬ chá»n trá»±c tiáº¿p tá»« `nums1`, ta sáº½ **sáº¯p xáº¿p `nums2` giáº£m dáº§n** vÃ  xÃ©t tá»«ng pháº§n tá»­.
* Duy trÃ¬ má»™t **min-heap** Ä‘á»ƒ lÆ°u **`k` pháº§n tá»­ lá»›n nháº¥t tá»« `nums1`**.
* Táº¡i má»—i bÆ°á»›c, cáº­p nháº­t **tá»•ng `sum(nums1)` hiá»‡n táº¡i**, sau Ä‘Ã³ tÃ­nh Ä‘iá»ƒm báº±ng cÃ´ng thá»©c: score=current sumÃ—min(nums2\[i])\text{score} = \text{current sum} \times \text{min}(nums2\[i])score=current sumÃ—min(nums2\[i])
* Duy trÃ¬ giÃ¡ trá»‹ **max\_score** lá»›n nháº¥t cÃ³ thá»ƒ.

## **ğŸ“œ Code - Min-Heap + Sorting**

{% tabs %}
{% tab title="C++" %}
```cpp
#include <vector>
#include <queue>
#include <algorithm>

using namespace std;

class Solution {
public:
    long long maxScore(vector<int>& nums1, vector<int>& nums2, int k) {
        vector<pair<int, int>> paired;
        for (int i = 0; i < nums1.size(); i++) {
            paired.push_back({nums2[i], nums1[i]});
        }
        
        sort(paired.rbegin(), paired.rend());  // Sáº¯p xáº¿p giáº£m dáº§n theo nums2

        priority_queue<int, vector<int>, greater<int>> minHeap;
        long long sum = 0, max_score = 0;

        for (int i = 0; i < nums1.size(); i++) {
            minHeap.push(paired[i].second);
            sum += paired[i].second;

            if (minHeap.size() > k) {
                sum -= minHeap.top();
                minHeap.pop();
            }

            if (minHeap.size() == k) {
                max_score = max(max_score, sum * paired[i].first);
            }
        }

        return max_score;
    }
};
```
{% endtab %}

{% tab title="Java" %}
```java
import java.util.*;

class Solution {
    public long maxScore(int[] nums1, int[] nums2, int k) {
        int n = nums1.length;
        List<int[]> paired = new ArrayList<>();

        for (int i = 0; i < n; i++) {
            paired.add(new int[]{nums2[i], nums1[i]});
        }

        paired.sort((a, b) -> Integer.compare(b[0], a[0])); // Sáº¯p xáº¿p giáº£m dáº§n theo nums2

        PriorityQueue<Integer> minHeap = new PriorityQueue<>();
        long sum = 0, max_score = 0;

        for (int[] pair : paired) {
            minHeap.add(pair[1]);
            sum += pair[1];

            if (minHeap.size() > k) {
                sum -= minHeap.poll();
            }

            if (minHeap.size() == k) {
                max_score = Math.max(max_score, sum * pair[0]);
            }
        }

        return max_score;
    }
}
```
{% endtab %}

{% tab title="Python" %}
```python
import heapq

class Solution:
    def maxScore(self, nums1: list[int], nums2: list[int], k: int) -> int:
        paired = sorted(zip(nums2, nums1), reverse=True)  # Sáº¯p xáº¿p giáº£m dáº§n theo nums2
        min_heap = []
        sum_nums1 = 0
        max_score = 0

        for num2, num1 in paired:
            heapq.heappush(min_heap, num1)
            sum_nums1 += num1

            if len(min_heap) > k:
                sum_nums1 -= heapq.heappop(min_heap)

            if len(min_heap) == k:
                max_score = max(max_score, sum_nums1 * num2)

        return max_score
```
{% endtab %}
{% endtabs %}

***

## **ğŸ¯ Äiá»ƒm chÃ­nh**

âœ” **Sáº¯p xáº¿p `nums2` giáº£m dáº§n** giÃºp ta Æ°u tiÃªn cÃ¡c pháº§n tá»­ cÃ³ giÃ¡ trá»‹ lá»›n trong phÃ©p nhÃ¢n.\
âœ” **DÃ¹ng min-heap Ä‘á»ƒ duy trÃ¬ `k` pháº§n tá»­ lá»›n nháº¥t tá»« `nums1`** giÃºp ta luÃ´n chá»n tá»•ng `sum(nums1)` tá»‘i Æ°u.\
âœ” **TÃ­nh Ä‘iá»ƒm táº¡i má»—i bÆ°á»›c** báº±ng cÃ´ng thá»©c:

score=current sumÃ—min(nums2\[i])\text{score} = \text{current sum} \times \text{min}(nums2\[i])score=current sumÃ—min(nums2\[i])

âœ” **Duyá»‡t `nums1` tá»« lá»›n Ä‘áº¿n nhá»**, Ä‘áº£m báº£o ta chá»n Ä‘Æ°á»£c **Ä‘iá»ƒm sá»‘ lá»›n nháº¥t cÃ³ thá»ƒ**.

***

## **â³ Äá»™ phá»©c táº¡p thuáº­t toÃ¡n**

| PhÆ°Æ¡ng phÃ¡p            | Sáº¯p xáº¿p (`sort()`) | Duyá»‡t (`O(n log k)`) | Tá»•ng         |
| ---------------------- | ------------------ | -------------------- | ------------ |
| **Min-Heap + Sorting** | `O(n log n)`       | `O(n log k)`         | `O(n log n)` |

ğŸ“ **Pháº§n sáº¯p xáº¿p chiáº¿m `O(n log n)`, cÃ²n viá»‡c duyá»‡t sá»­ dá»¥ng heap `O(n log k)`. Tá»•ng thá»ƒ váº«n tá»‘i Æ°u!** ğŸš€

***

## **ğŸ“Œ Tá»•ng káº¿t**

* âœ… **Sáº¯p xáº¿p `nums2` giáº£m dáº§n** Ä‘á»ƒ Æ°u tiÃªn giÃ¡ trá»‹ lá»›n.
* âœ… **DÃ¹ng Min-Heap** Ä‘á»ƒ giá»¯ `k` pháº§n tá»­ lá»›n nháº¥t tá»« `nums1`.
* âœ… **Duyá»‡t qua tá»«ng pháº§n tá»­**, cáº­p nháº­t tá»•ng vÃ  tÃ­nh `max_score`.
* âœ… **Äá»™ phá»©c táº¡p `O(n log n)`, phÃ¹ há»£p vá»›i `n` lá»›n (â‰¤ 10^5).**
