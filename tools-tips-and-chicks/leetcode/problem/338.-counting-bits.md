# 338. Counting Bits

## **â“ Problem**

[**Leetcode:  338. Counting Bits**](https://leetcode.com/problems/counting-bits)

***

## **ğŸ“ MÃ´ táº£:**

Cho má»™t sá»‘ nguyÃªn **n**, hÃ£y tráº£ vá» má»™t máº£ng **ans** vá»›i kÃ­ch thÆ°á»›c **n+1**, trong Ä‘Ã³ **ans\[i]** lÃ  sá»‘ lÆ°á»£ng bit `1` trong biá»ƒu diá»…n nhá»‹ phÃ¢n cá»§a sá»‘ **i**.

***

## **ğŸ’¡ VÃ­ dá»¥:**

#### **âœ… VÃ­ dá»¥ 1:**

ğŸ”¹ **Input:** `n = 2`\
ğŸ”¹ **Output:** `[0,1,1]`\
ğŸ”¹ **Giáº£i thÃ­ch:**

* `0` (0b0000) cÃ³ `0` bit 1.
* `1` (0b0001) cÃ³ `1` bit 1.
* `2` (0b0010) cÃ³ `1` bit 1.

#### **âœ… VÃ­ dá»¥ 2:**

ğŸ”¹ **Input:** `n = 5`\
ğŸ”¹ **Output:** `[0,1,1,2,1,2]`\
ğŸ”¹ **Giáº£i thÃ­ch:**

* `0` (0b0000) â†’ `0`
* `1` (0b0001) â†’ `1`
* `2` (0b0010) â†’ `1`
* `3` (0b0011) â†’ `2`
* `4` (0b0100) â†’ `1`
* `5` (0b0101) â†’ `2`

***

## **ğŸš€ Giáº£i phÃ¡p 1: Brute Force (Duyá»‡t tá»«ng sá»‘)**

> #### **Ã tÆ°á»Ÿng:** Duyá»‡t qua táº¥t cáº£ cÃ¡c sá»‘ tá»« `0` Ä‘áº¿n `n`, Ä‘áº¿m sá»‘ `1` trong biá»ƒu diá»…n nhá»‹ phÃ¢n cá»§a má»—i sá»‘.

### **ğŸ“œ Code:**

{% tabs %}
{% tab title="C++" %}
```cpp
class Solution {
public:
    vector<int> countBits(int n) {
        vector<int> ans(n + 1, 0);
        for (int i = 0; i <= n; i++) {
            int count = 0, num = i;
            while (num) {
                count += num % 2;
                num /= 2;
            }
            ans[i] = count;
        }
        return ans;
    }
};
```
{% endtab %}

{% tab title="Java" %}
```java
class Solution {
    public int[] countBits(int n) {
        int[] ans = new int[n + 1];
        for (int i = 0; i <= n; i++) {
            int count = 0, num = i;
            while (num != 0) {
                count += num % 2;
                num /= 2;
            }
            ans[i] = count;
        }
        return ans;
    }
}
```
{% endtab %}

{% tab title="Python" %}
```python
class Solution:
    def countBits(self, n: int) -> List[int]:
        ans = [0] * (n + 1)
        for i in range(n + 1):
            count = 0
            num = i
            while num:
                count += num % 2
                num //= 2
            ans[i] = count
        return ans
```
{% endtab %}
{% endtabs %}

### **â³ Äá»™ phá»©c táº¡p:**

* **Thá»i gian:** `O(n log n)`, vÃ¬ má»—i sá»‘ máº¥t `O(log n)` Ä‘á»ƒ Ä‘áº¿m bit `1`.
* **KhÃ´ng gian:** `O(n)`, vÃ¬ lÆ°u trá»¯ káº¿t quáº£ trong máº£ng `ans`.

***

## **ğŸš€ Giáº£i phÃ¡p 2: Sá»­ dá»¥ng `dp[i] = dp[i // 2] + (i % 2)`**

#### **Ã tÆ°á»Ÿng:**

* Náº¿u `i` lÃ  sá»‘ cháºµn: `dp[i] = dp[i // 2]` (vÃ¬ `i` chá»‰ lÃ  `i/2` dá»‹ch trÃ¡i 1 bit).
* Náº¿u `i` lÃ  sá»‘ láº»: `dp[i] = dp[i // 2] + 1` (vÃ¬ `i` lÃ  sá»‘ cháºµn thÃªm `1`).

### **ğŸ“œ Code:**

{% tabs %}
{% tab title="C++" %}
```cpp
class Solution {
public:
    vector<int> countBits(int n) {
        vector<int> dp(n + 1, 0);
        for (int i = 1; i <= n; i++) {
            dp[i] = dp[i / 2] + (i % 2);
        }
        return dp;
    }
};
```
{% endtab %}

{% tab title="Java" %}
```java
class Solution {
    public int[] countBits(int n) {
        int[] dp = new int[n + 1];
        for (int i = 1; i <= n; i++) {
            dp[i] = dp[i / 2] + (i % 2);
        }
        return dp;
    }
}
```
{% endtab %}

{% tab title="Python" %}
```python
class Solution:
    def countBits(self, n: int) -> List[int]:
        dp = [0] * (n + 1)
        for i in range(1, n + 1):
            dp[i] = dp[i // 2] + (i % 2)
        return dp
```
{% endtab %}
{% endtabs %}

### **â³ Äá»™ phá»©c táº¡p:**

* **Thá»i gian:** `O(n)`, má»—i sá»‘ chá»‰ máº¥t `O(1)` Ä‘á»ƒ tÃ­nh.
* **KhÃ´ng gian:** `O(n)`, vÃ¬ lÆ°u máº£ng `dp`.

***

## **ğŸš€ Giáº£i phÃ¡p 3: Sá»­ dá»¥ng Brian Kernighan's Algorithm**

$$
dp[i] = dp[i \text{ & } (i - 1)] + 1
$$

#### **Ã tÆ°á»Ÿng:**

* `i & (i - 1)` giÃºp xÃ³a **bit 1 tháº¥p nháº¥t** trong `i`.
* `dp[i] = dp[i & (i - 1)] + 1`, vÃ¬ `dp[i & (i - 1)]` Ä‘Ã£ tÃ­nh trÆ°á»›c Ä‘Ã³.

### **ğŸ“œ Code:**

{% tabs %}
{% tab title="C++" %}
```cpp
class Solution {
public:
    vector<int> countBits(int n) {
        vector<int> dp(n + 1, 0);
        for (int i = 1; i <= n; i++) {
            dp[i] = dp[i & (i - 1)] + 1;
        }
        return dp;
    }
};
```
{% endtab %}

{% tab title="Java" %}
```java
class Solution {
    public int[] countBits(int n) {
        int[] dp = new int[n + 1];
        for (int i = 1; i <= n; i++) {
            dp[i] = dp[i & (i - 1)] + 1;
        }
        return dp;
    }
}
```
{% endtab %}

{% tab title="Python" %}
```python
class Solution:
    def countBits(self, n: int) -> List[int]:
        dp = [0] * (n + 1)
        for i in range(1, n + 1):
            dp[i] = dp[i & (i - 1)] + 1
        return dp
```
{% endtab %}
{% endtabs %}

### **â³ Äá»™ phá»©c táº¡p:**

* **Thá»i gian:** `O(n)`, vÃ¬ má»—i sá»‘ chá»‰ máº¥t `O(1)` Ä‘á»ƒ tÃ­nh.
* **KhÃ´ng gian:** `O(n)`, vÃ¬ lÆ°u máº£ng `dp`.

***

## **ğŸ¯ Äiá»ƒm chÃ­nh**

* **Giáº£i phÃ¡p 1** (Brute Force): Cháº¡y qua tá»«ng sá»‘, tá»‘n `O(n log n)`.
* **Giáº£i phÃ¡p 2** (`dp[i] = dp[i / 2] + i % 2`): Tá»‘i Æ°u `O(n)`, dá»… hiá»ƒu.
* **Giáº£i phÃ¡p 3** (`dp[i] = dp[i & (i - 1)] + 1`): DÃ¹ng thuáº­t toÃ¡n Brian Kernighan Ä‘á»ƒ tá»‘i Æ°u `O(n)`.

***

## **â³ Äá»™ phá»©c táº¡p**

<table><thead><tr><th width="253">Giáº£i phÃ¡p</th><th>Thá»i gian</th><th>KhÃ´ng gian</th></tr></thead><tbody><tr><td>Brute Force</td><td>O(n.log(n))</td><td>O(n)</td></tr><tr><td><strong><code>d</code></strong>p[i] = dp[i // 2] + (i % 2)</td><td>O(n)</td><td>O(1)</td></tr><tr><td><strong>B</strong>rian Kernighan's Algorithm</td><td>O(n)</td><td>O(1)</td></tr></tbody></table>

***

## **ğŸ“Œ Tá»•ng káº¿t**

âœ… BÃ i toÃ¡n nÃ y cÃ³ thá»ƒ giáº£i báº±ng **Dynamic Programming (DP)**.\
âœ… CÃ¡ch tá»‘t nháº¥t lÃ  dÃ¹ng **Bit Manipulation** (`dp[i] = dp[i & (i - 1)] + 1`).\
âœ… Giáº£i phÃ¡p tá»‘t nháº¥t cÃ³ Ä‘á»™ phá»©c táº¡p `O(n)`, tá»‘i Æ°u hÆ¡n Brute Force `O(n log n)`. ğŸš€
